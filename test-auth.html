<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Auth Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div style="max-width: 600px; margin: 50px auto; padding: 20px;">
        <h1>Supabase Authentication Test</h1>
        
        <div style="margin-bottom: 20px;">
            <h2>Sign Up</h2>
            <input type="email" id="signup-email" placeholder="Email" style="width: 100%; padding: 10px; margin: 5px 0;"><br>
            <input type="password" id="signup-password" placeholder="Password" style="width: 100%; padding: 10px; margin: 5px 0;"><br>
            <button onclick="signUp()" style="padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer;">Sign Up</button>
        </div>
        
        <div style="margin-bottom: 20px;">
            <h2>Sign In</h2>
            <input type="email" id="signin-email" placeholder="Email" style="width: 100%; padding: 10px; margin: 5px 0;"><br>
            <input type="password" id="signin-password" placeholder="Password" style="width: 100%; padding: 10px; margin: 5px 0;"><br>
            <button onclick="signIn()" style="padding: 10px 20px; background: #28a745; color: white; border: none; cursor: pointer;">Sign In</button>
        </div>
        
        <div style="margin-bottom: 20px;">
            <h2>User Info</h2>
            <button onclick="getUser()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; cursor: pointer;">Get User</button>
            <button onclick="signOut()" style="padding: 10px 20px; background: #dc3545; color: white; border: none; cursor: pointer;">Sign Out</button>
        </div>
        
        <div id="output" style="background: #f8f9fa; padding: 15px; border-radius: 5px; min-height: 100px;">
            <p>Output will appear here...</p>
        </div>
    </div>

    <script>
        // Initialize Supabase
        const supabaseUrl = 'https://lzuwgoefuskxjaggmcev.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx6dXdnb2VmdXNreGphZ2dtY2V2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5NjkwOTIsImV4cCI6MjA3MTU0NTA5Mn0.p_BYZVqaZl9NBZrKYs9MGq27vvZjyEQJwh7y1n3NIDk';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);
        
        function updateOutput(message) {
            document.getElementById('output').innerHTML = '<p>' + message + '</p>';
        }
        
        async function signUp() {
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            updateOutput('Signing up...');
            
            try {
                const { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password
                });
                
                if (error) throw error;
                
                updateOutput('Sign up successful! Check your email for confirmation.');
                console.log('Sign up data:', data);
            } catch (error) {
                updateOutput('Sign up error: ' + error.message);
                console.error('Sign up error:', error);
            }
        }
        
        async function signIn() {
            const email = document.getElementById('signin-email').value;
            const password = document.getElementById('signin-password').value;
            
            updateOutput('Signing in...');
            
            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) throw error;
                
                updateOutput('Sign in successful! User ID: ' + data.user.id);
                console.log('Sign in data:', data);
            } catch (error) {
                updateOutput('Sign in error: ' + error.message);
                console.error('Sign in error:', error);
            }
        }
        
        async function getUser() {
            updateOutput('Getting user...');
            
            try {
                const { data: { user }, error } = await supabase.auth.getUser();
                
                if (error) throw error;
                
                if (user) {
                    updateOutput('User found! Email: ' + user.email + ', ID: ' + user.id);
                } else {
                    updateOutput('No user is currently signed in.');
                }
            } catch (error) {
                updateOutput('Get user error: ' + error.message);
                console.error('Get user error:', error);
            }
        }
        
        async function signOut() {
            updateOutput('Signing out...');
            
            try {
                const { error } = await supabase.auth.signOut();
                
                if (error) throw error;
                
                updateOutput('Sign out successful!');
            } catch (error) {
                updateOutput('Sign out error: ' + error.message);
                console.error('Sign out error:', error);
            }
        }
    </script>
</body>
</html>